!function(e){e.extend(e.fn,{swapClass:function(e,t){var a=this.filter("."+e);return this.filter("."+t).removeClass(t).addClass(e),a.removeClass(e).addClass(t),this},replaceClass:function(e,t){return this.filter("."+e).removeClass(e).addClass(t).end()},hoverClass:function(t){return t=t||"hover",this.hover(function(){e(this).addClass(t)},function(){e(this).removeClass(t)})},heightToggle:function(e,t){e?this.animate({height:"toggle"},e,t):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"](),t&&t.apply(this,arguments)})},heightHide:function(e,t){e?this.animate({height:"hide"},e,t):(this.hide(),t&&this.each(t))},prepareBranches:function(e){return e.prerendered||(this.filter(":last-child:not(ul)").addClass(t.last),this.filter((e.collapsed?"":"."+t.closed)+":not(."+t.open+")").find(">ul").hide()),this.filter(":has(>ul)")},applyClasses:function(a,n){if(this.filter(":has(>ul):not(:has(>a))").find(">span").unbind("click.treeview").bind("click.treeview",function(t){this==t.target&&n.apply(e(this).next())}).add(e("a",this)).hoverClass(),!a.prerendered){this.filter(":has(>ul:hidden)").addClass(t.expandable).replaceClass(t.last,t.lastExpandable),this.not(":has(>ul:hidden)").addClass(t.collapsable).replaceClass(t.last,t.lastCollapsable);var i=this.find("div."+t.hitarea);i.length||(i=this.prepend('<div class="'+t.hitarea+'"/>').find("div."+t.hitarea)),i.removeClass().addClass(t.hitarea).each(function(){var t="";e.each(e(this).parent().attr("class").split(" "),function(){t+=this+"-hitarea "}),e(this).addClass(t)})}this.find("div."+t.hitarea).click(n)},treeview:function(a){function n(a,n){function r(n){return function(){return i.apply(e("div."+t.hitarea,a).filter(function(){return n?e(this).parent("."+n).length:!0})),!1}}e("a:eq(0)",n).click(r(t.collapsable)),e("a:eq(1)",n).click(r(t.expandable)),e("a:eq(2)",n).click(r())}function i(){e(this).parent().find(">.hitarea").swapClass(t.collapsableHitarea,t.expandableHitarea).swapClass(t.lastCollapsableHitarea,t.lastExpandableHitarea).end().swapClass(t.collapsable,t.expandable).swapClass(t.lastCollapsable,t.lastExpandable).find(">ul").heightToggle(a.animated,a.toggle),a.unique&&e(this).parent().siblings().find(">.hitarea").replaceClass(t.collapsableHitarea,t.expandableHitarea).replaceClass(t.lastCollapsableHitarea,t.lastExpandableHitarea).end().replaceClass(t.collapsable,t.expandable).replaceClass(t.lastCollapsable,t.lastExpandable).find(">ul").heightHide(a.animated,a.toggle)}function r(){var t=[];o.each(function(a,n){t[a]=e(n).is(":has(>ul:visible)")?1:0}),e.cookie(a.cookieId,t.join(""),a.cookieOptions)}function s(){var t=e.cookie(a.cookieId);if(t){var n=t.split("");o.each(function(t,a){e(a).find(">ul")[parseInt(n[t])?"show":"hide"]()})}}if(a=e.extend({cookieId:"treeview"},a),a.toggle){var l=a.toggle;a.toggle=function(){return l.apply(e(this).parent()[0],arguments)}}this.data("toggler",i),this.addClass("treeview");var o=this.find("li").prepareBranches(a);switch(a.persist){case"cookie":var d=a.toggle;a.toggle=function(){r(),d&&d.apply(this,arguments)},s();break;case"location":var h=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()});if(h.length){var p=h.addClass("selected").parents("ul, li").add(h.next()).show();a.prerendered&&p.filter("li").swapClass(t.collapsable,t.expandable).swapClass(t.lastCollapsable,t.lastExpandable).find(">.hitarea").swapClass(t.collapsableHitarea,t.expandableHitarea).swapClass(t.lastCollapsableHitarea,t.lastExpandableHitarea)}}return o.applyClasses(a,i),a.control&&(n(this,a.control),e(a.control).show()),this}}),e.treeview={};var t=e.treeview.classes={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"}}(jQuery),function(e){var t={};t.isFunction=function(e){return e&&"[object Function]"==={}.toString.call(e)},t.rowClicker=function(a){"undefined"!=typeof t.conf.onBeforeRowClick&&t.isFunction(t.conf.onBeforeRowClick)&&t.conf.onBeforeRowClick.apply(t.getPublicObj(),[a]);var n=e(a.currentTarget);n.is("tr")||(n=n.parentsUntil("tr").parent()),$row=n;var i=$row.attr("id");return $row.hasClass("contracted")?($row.removeClass("contracted").addClass("expanded"),t.toggleChildren(i,!0)):($row.removeClass("expanded").addClass("contracted"),t.toggleChildren(i,!1)),t.updateLines(),"undefined"!=typeof t.conf.onAfterRowClick&&t.isFunction(t.conf.onAfterRowClick)&&t.conf.onAfterRowClick.apply(t.getPublicObj(),[a]),t.getPublicObj()},t.updateLines=function(){var a="",n="";if($prevRow=null,t.caller.find("tr:not(.hidden):not(.hiding)").each(function(){if($row=e(this),!$row.hasClass("header")){a=$row.data("level");for(var i=t.maxLevel;i>0;i--)$row.removeClass("l"+i+"-first").removeClass("l"+i+"-last");var r="";if(a!=n)if(""!=n&&n>a)for(var i=n;i>=a;i--)$prevRow.addClass(" l"+parseInt(i)+"-last");else""!=n&&a>n&&$prevRow.addClass(" l"+n+"-first");$row.addClass(r),n=a,$prevRow=$row}}),null!=$prevRow&&""!=n&&n>1)for(var i=n-1;i>0;i--)$prevRow.addClass(" l"+parseInt(i)+"-last");return t.getPublicObj()},t.toggleChildren=function(a,n,i){var r=!1,s=!1,l=null,o=0;return t.caller.find("tr").each(function(){var t=e(this),i=t.attr("id"),d=t.data("level"),h=!1;r||i!=a?r&&!s&&null!=l&&d==o?s=!0:n&&r&&!s&&null!=l&&d!=o+1?h=!0:!n&&r&&!s&&null!=l&&o>d&&(s=!0,h=!0):(r=!0,o=d),h||!r||s||i==a||(n?(t.removeClass("hidden"),t.find("td").wrapInner('<div style="display: none;" />').parent().find("td > div").slideDown(100,function(){var t=e(this);t.replaceWith(t.contents())})):(t.addClass("hiding"),t.find("td").wrapInner('<div style="" />').parent().find("td > div").slideUp(100,function(){var a=e(this);a.replaceWith(a.contents()),t.addClass("hidden"),t.removeClass("hiding")}),t.removeClass("expanded"),t.addClass("contracted"))),l=d}),t.getPublicObj()},t.updateData=function(){t.caller.data("tabelizer",t)},t.maxLevel=0,t.init=function(){var a="",n="";return $prevRow=null,t.caller.find("tr").each(function(){if($row=e(this),!$row.hasClass("header")){a=$row.data("level");var i="l"+a+" contracted "+(a>1?" hidden":"");a>t.maxLevel&&(t.maxLevel=parseInt(a)),$row.addClass(i),$firstCol=e($row.children("td")[0]);for(var r='<div class="label">'+$firstCol.html()+"</div>",s='<div class="control"> ',l=0;a-1>=l;l++)s+=' <div class="line level'+(l+1)+'"><div class="vert"></div><div class="horz"></div></div> ';s+="</div>",$firstCol.html(s+' <div class="expander"></div> '+r),t.conf.fullRowClickable?$row.on("click",t.conf.onRowClick):$row.find(".expander").on("click",t.conf.onRowClick),n=a,$prevRow=$row}}),t.updateLines(),"undefined"!=typeof t.conf.onReady&&t.isFunction(t.conf.onReady)&&t.conf.onReady.apply(t.getPublicObj(),[]),t.getPublicObj()},t.getPublicObj=function(){return{options:t.conf,toggleChildren:t.toggleChildren,updateLines:t.updateLines,rowClicker:t.rowClicker,maxLevel:t.maxLevel,updateData:t.updateData}},t.conf={onRowClick:t.rowClicker,fullRowClickable:!0,onBeforeRowClick:null,onAfterRowClick:null,onReady:null},e.fn.tabelize=function(a){var n=this.data("tabelizer");return"undefined"==typeof n?(e.extend(t.conf,a),t.caller=this,t.init()):(t=n,e.extend(t.conf,a)),t.updateData(),t.getPublicObj()}}(jQuery),function(){var e,t,a,n;e=jQuery,t=function(){function t(t,a,n){var i;this.row=t,this.tree=a,this.settings=n,this.id=this.row.data(this.settings.nodeIdAttr),i=this.row.data(this.settings.parentIdAttr),null!=i&&""!==i&&(this.parentId=i),this.treeCell=e(this.row.children(this.settings.columnElType)[this.settings.column]),this.expander=e(this.settings.expanderTemplate),this.indenter=e(this.settings.indenterTemplate),this.children=[],this.initialized=!1,this.treeCell.prepend(this.indenter)}return t.prototype.addChild=function(e){return this.children.push(e)},t.prototype.ancestors=function(){var e,t;for(t=this,e=[];t=t.parentNode();)e.push(t);return e},t.prototype.collapse=function(){return this.collapsed()?this:(this.row.removeClass("expanded").addClass("collapsed"),this._hideChildren(),this.expander.attr("title",this.settings.stringExpand),this.initialized&&null!=this.settings.onNodeCollapse&&this.settings.onNodeCollapse.apply(this),this)},t.prototype.collapsed=function(){return this.row.hasClass("collapsed")},t.prototype.expand=function(){return this.expanded()?this:(this.row.removeClass("collapsed").addClass("expanded"),this.initialized&&null!=this.settings.onNodeExpand&&this.settings.onNodeExpand.apply(this),e(this.row).is(":visible")&&this._showChildren(),this.expander.attr("title",this.settings.stringCollapse),this)},t.prototype.expanded=function(){return this.row.hasClass("expanded")},t.prototype.hide=function(){return this._hideChildren(),this.row.hide(),this},t.prototype.isBranchNode=function(){return this.children.length>0||this.row.data(this.settings.branchAttr)===!0?!0:!1},t.prototype.updateBranchLeafClass=function(){this.row.removeClass("branch"),this.row.removeClass("leaf"),this.row.addClass(this.isBranchNode()?"branch":"leaf")},t.prototype.level=function(){return this.ancestors().length},t.prototype.parentNode=function(){return null!=this.parentId?this.tree[this.parentId]:null},t.prototype.removeChild=function(t){var a=e.inArray(t,this.children);return this.children.splice(a,1)},t.prototype.render=function(){var t,a,n=this.settings;return n.expandable===!0&&this.isBranchNode()&&(t=function(t){return e(this).parents("table").treetable("node",e(this).parents("tr").data(n.nodeIdAttr)).toggle(),t.preventDefault()},this.indenter.html(this.expander),a=n.clickableNodeNames===!0?this.treeCell:this.expander,a.off("click.treetable").on("click.treetable",t),a.off("keydown.treetable").on("keydown.treetable",function(e){13==e.keyCode&&t.apply(this,[e])})),this.indenter[0].style.paddingLeft=""+this.level()*n.indent+"px",this},t.prototype.reveal=function(){return null!=this.parentId&&this.parentNode().reveal(),this.expand()},t.prototype.setParent=function(e){return null!=this.parentId&&this.tree[this.parentId].removeChild(this),this.parentId=e.id,this.row.data(this.settings.parentIdAttr,e.id),e.addChild(this)},t.prototype.show=function(){return this.initialized||this._initialize(),this.row.show(),this.expanded()&&this._showChildren(),this},t.prototype.toggle=function(){return this.expanded()?this.collapse():this.expand(),this},t.prototype._hideChildren=function(){var e,t,a,n,i;for(n=this.children,i=[],t=0,a=n.length;a>t;t++)e=n[t],i.push(e.hide());return i},t.prototype._initialize=function(){var e=this.settings;return this.render(),e.expandable===!0&&"collapsed"===e.initialState?this.collapse():this.expand(),null!=e.onNodeInitialized&&e.onNodeInitialized.apply(this),this.initialized=!0},t.prototype._showChildren=function(){var e,t,a,n,i;for(n=this.children,i=[],t=0,a=n.length;a>t;t++)e=n[t],i.push(e.show());return i},t}(),a=function(){function a(e,t){this.table=e,this.settings=t,this.tree={},this.nodes=[],this.roots=[]}return a.prototype.collapseAll=function(){var e,t,a,n,i;for(n=this.nodes,i=[],t=0,a=n.length;a>t;t++)e=n[t],i.push(e.collapse());return i},a.prototype.expandAll=function(){var e,t,a,n,i;for(n=this.nodes,i=[],t=0,a=n.length;a>t;t++)e=n[t],i.push(e.expand());return i},a.prototype.findLastNode=function(e){return e.children.length>0?this.findLastNode(e.children[e.children.length-1]):e},a.prototype.loadRows=function(a){var n,i,r;if(null!=a)for(r=0;r<a.length;r++)i=e(a[r]),null!=i.data(this.settings.nodeIdAttr)&&(n=new t(i,this.tree,this.settings),this.nodes.push(n),this.tree[n.id]=n,null!=n.parentId?this.tree[n.parentId].addChild(n):this.roots.push(n));for(r=0;r<this.nodes.length;r++)n=this.nodes[r].updateBranchLeafClass();return this},a.prototype.move=function(t,a){var n=t.parentNode();return t!==a&&a.id!==t.parentId&&-1===e.inArray(t,a.ancestors())&&(t.setParent(a),this._moveRows(t,a),1===t.parentNode().children.length&&t.parentNode().render()),n&&n.updateBranchLeafClass(),t.parentNode()&&t.parentNode().updateBranchLeafClass(),t.updateBranchLeafClass(),this},a.prototype.removeNode=function(t){this.unloadBranch(t),t.row.remove(),delete this.tree[t.id],this.nodes.splice(e.inArray(t,this.nodes),1)},a.prototype.render=function(){var e,t,a,n;for(n=this.roots,t=0,a=n.length;a>t;t++)e=n[t],e.show();return this},a.prototype.sortBranch=function(e,t){return e.children.sort(t),this._sortChildRows(e),this},a.prototype.unloadBranch=function(e){var t;for(t=0;t<e.children.length;t++)this.removeNode(e.children[t]);return e.children=[],e.updateBranchLeafClass(),this},a.prototype._moveRows=function(e,t){var a,n=e.children;for(e.row.insertAfter(t.row),e.render(),a=n.length-1;a>=0;a--)this._moveRows(n[a],e)},a.prototype._sortChildRows=function(e){return this._moveRows(e,e)},a}(),n={init:function(t,n){var i;return i=e.extend({branchAttr:"ttBranch",clickableNodeNames:!1,column:0,columnElType:"td",expandable:!1,expanderTemplate:"<a href='#'>&nbsp;</a>",indent:19,indenterTemplate:"<span class='indenter'></span>",initialState:"collapsed",nodeIdAttr:"ttId",parentIdAttr:"ttParentId",stringExpand:"Expand",stringCollapse:"Collapse",onInitialized:null,onNodeCollapse:null,onNodeExpand:null,onNodeInitialized:null},t),this.each(function(){var t,r=e(this);return(n||void 0===r.data("treetable"))&&(t=new a(this,i),t.loadRows(this.rows).render(),r.addClass("treetable").data("treetable",t),null!=i.onInitialized&&i.onInitialized.apply(t)),r})},destroy:function(){return this.each(function(){return e(this).removeData("treetable").removeClass("treetable")})},collapseAll:function(){return this.data("treetable").collapseAll(),this},collapseNode:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return t.collapse(),this},expandAll:function(){return this.data("treetable").expandAll(),this},expandNode:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return t.initialized||t._initialize(),t.expand(),this},loadBranch:function(t,a){var n=this.data("treetable").settings,i=this.data("treetable").tree;if(a=e(a),null==t)this.append(a);else{var r=this.data("treetable").findLastNode(t);a.insertAfter(r.row)}return this.data("treetable").loadRows(a),a.filter("tr").each(function(){i[e(this).data(n.nodeIdAttr)].show()}),null!=t&&t.render().expand(),this},move:function(e,t){var a,n;return n=this.data("treetable").tree[e],a=this.data("treetable").tree[t],this.data("treetable").move(n,a),this},node:function(e){return this.data("treetable").tree[e]},removeNode:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return this.data("treetable").removeNode(t),this},reveal:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return t.reveal(),this},sortBranch:function(t,a){var n,i=this.data("treetable").settings;return a=a||i.column,n=a,e.isNumeric(a)&&(n=function(t,n){var i,r,s;return i=function(t){var n=t.row.find("td:eq("+a+")").text();return e.trim(n).toUpperCase()},r=i(t),s=i(n),s>r?-1:r>s?1:0}),this.data("treetable").sortBranch(t,n),this},unloadBranch:function(e){return this.data("treetable").unloadBranch(e),this}},e.fn.treetable=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?e.error("Method "+t+" does not exist on jQuery.treetable"):n.init.apply(this,arguments)},this.TreeTable||(this.TreeTable={}),this.TreeTable.Node=t,this.TreeTable.Tree=a}.call(this),$("#example-advanced").treetable({expandAll:!0});